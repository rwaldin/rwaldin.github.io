(()=>{var c=class{constructor(o,e=this){this.value=o,this.left=e,this.right=this.up=this.down=this}insertBelow(o){this.up=o,this.down=o.down,o.down.up=o.down=this,this.column=o.column,++this.column.rowCount}removeVertically(){this.up.down=this.down,this.down.up=this.up,--this.column.rowCount}reinsertVertically(){this.up.down=this.down.up=this,++this.column.rowCount}removeHorizontally(){this.left.right=this.right,this.right.left=this.left}reinsertHorizontally(){this.left.right=this.right.left=this}},f=class extends c{constructor(o,e){super(o,e),this.rowCount=0,this.column=this}},w=i=>{let o=i.column;o.removeHorizontally();for(let e=o.down;e!==o;e=e.down){--o.header.rowCount;for(let r=e.right;r!==e;r=r.right)r.removeVertically()}},y=i=>{let o=i.column;for(let e=o.up;e!==o;e=e.up){for(let r=e.left;r!==e;r=r.left)r.reinsertVertically();++o.header.rowCount}o.reinsertHorizontally()},V=i=>{let o;for(let e=i.right;e!==i;e=e.right){if(e.rowCount===0)return e;(!o||e.rowCount<o.rowCount)&&(o=e)}return o};function*v(i,o=[]){let e=[...new Set(Object.values(i).flat())],r=new f("columns"),p=new Map,C=50,H=(s,n)=>{let t=new f(n,s);return p.set(t.value,t),t.header=r,s.right=t};r.left=e.reduce(H,r),r.left.right=r;let a=new Map;for(let[s,n]of Object.entries(i)){let t=new c,l=(g,z)=>{let h=new c(z,g),B=p.get(h.value);return h.insertBelow(B.up),h.option=s,g.right=h};t.left=n.reduce(l,t),t.left.right=t,a.set(s,t.right),t.removeHorizontally(),++r.rowCount}let M=(s,n)=>{for(let t=s.down;t!==s;t=t.down)if(t===n)return!0},u=[];for(let s of o){let n=a.get(s);if(n&&M(n.column,n)){w(n);for(let t=n.right;t!==n;t=t.right)w(t);u.push(n.option),a.delete(s)}else return}let d=Date.now();function*m(){let s=Date.now(),n=V(r);if(!n){yield[...u],d=s;return}if(n.rowCount!==0){s-d>C&&(yield,d=s),w(n);for(let t=n.down;t!==n;t=t.down){u.push(t.option);for(let l=t.right;l!==t;l=l.right)w(l);yield*m();for(let l=t.left;l!==t;l=l.left)y(l);u.pop()}y(n)}}yield*m()}addEventListener("message",i=>{if(i.data.type==="solve"){for(let o of v(i.data.options))o&&postMessage({type:"solution",solution:o});postMessage({type:"completed"})}});})();
//# sourceMappingURL=worker-cq7podyn.js.map
